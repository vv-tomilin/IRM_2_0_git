<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="1015" version="1.2" width="1850" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:gridconfig enabled="true" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="false" height="10" width="10"/>
 </metadata>
 <rect atv:refpx="926" atv:refpy="226.343" fill="#141414" height="317.044" id="id_6" stroke="none" stroke-width="2" width="1130" x="358" y="45.175"/>
 <text atv:refpx="731.019" atv:refpy="139" fill="#ffffff" font-family="Arial" font-size="20" id="id_0" x="703.519" y="143.5">Забой</text>
 <text atv:refpx="1054.38" atv:refpy="139" fill="#ffffff" font-family="Arial" font-size="20" id="id_1" x="942.563" y="143.5">Положение инструмента</text>
 <text atv:refpx="908.073" atv:refpy="84.231" fill="#33cb36" font-family="Arial" font-size="26" id="id_28" transform="matrix(1,0,0,0.8,0,13.3262)" x="869.046" y="96.131">Сигналы</text>
 <svg atv:refpx="275.445" atv:refpy="-1" height="31" id="wd_set" transform="matrix(1.125,0,0,1.2903,0,0)" width="80" x="560.395" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.FlatComponents.EditableLabel" y="131.752">
  <atv:argument name="fontColor" value="#000000"/>
  <atv:argument name="controlTextColor" value="#000000"/>
  <atv:argument name="controlTintColor" value="#ffffff"/>
  <atv:argument name="editingBorderColor" value="#ffffff"/>
  <atv:argument name="editingBackgroundColor" value="#ffffff"/>
  <atv:argument name="focusStrokeColor" value="#ffffff"/>
  <atv:argument name="fillColorInactive" value="#ffffff"/>
  <atv:argument name="fill" value="#ffffff"/>
  <atv:argument name="controlEditingBackgroundColor" value="#ffffff"/>
  <atv:argument name="controlActiveBackgroundColor" value="#ffffff"/>
  <atv:argument name="controlBackgroundColor" value="#ffffff"/>
  <atv:argument name="base" value="AGENT.OBJECTS.Set_var.well_depth.listener"/>
  <atv:overwrite id="input_label" transform="matrix(0.8889,0,0,0.775,0,0)" x="45" y="26"/>
  <atv:overwrite height="38.999" id="input_bg" transform="matrix(0.8889,0,0,0.775,0,0)" width="89"/>
  <atv:overwrite height="55.499" id="blinking_frame" transform="matrix(0.8889,0,0,0.775,0,0)" width="162.326"/>
 </svg>
 <text atv:refpx="766" atv:refpy="197.5" fill="#cfcfcf" font-family="Arial" font-size="20" id="wd_current" x="745.5" y="196.5">$ value1 $</text>
 <text atv:refpx="702.566" atv:refpy="221.5" fill="#cfcfcf" font-family="Arial" font-size="10" id="id_5" x="650.066" y="229">Установка</text>
 <text atv:refpx="833.583" atv:refpy="221.5" fill="#cfcfcf" font-family="Arial" font-size="10" id="id_7" x="742.756" y="229">Текущее значение</text>
 <svg atv:refpx="684.841" atv:refpy="-1.001" height="31" id="id_2" transform="matrix(1.125,0,0,1.2903,0,0)" width="80" x="843.415" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.FlatComponents.EditableLabel" y="131.752">
  <atv:argument name="fontColor" value="#000000"/>
  <atv:argument name="controlTextColor" value="#000000"/>
  <atv:argument name="controlTintColor" value="#ffffff"/>
  <atv:argument name="editingBorderColor" value="#ffffff"/>
  <atv:argument name="editingBackgroundColor" value="#ffffff"/>
  <atv:argument name="focusStrokeColor" value="#ffffff"/>
  <atv:argument name="fillColorInactive" value="#ffffff"/>
  <atv:argument name="fill" value="#ffffff"/>
  <atv:argument name="controlEditingBackgroundColor" value="#ffffff"/>
  <atv:argument name="controlActiveBackgroundColor" value="#ffffff"/>
  <atv:argument name="controlBackgroundColor" value="#ffffff"/>
  <atv:argument name="base" value="AGENT.OBJECTS.Set_var.tool_position.listener"/>
  <atv:overwrite id="input_label" transform="matrix(0.8889,0,0,0.775,0,0)" x="45" y="26"/>
  <atv:overwrite height="38.999" id="input_bg" transform="matrix(0.8889,0,0,0.775,0,0)" width="89"/>
  <atv:overwrite height="55.499" id="blinking_frame" transform="matrix(0.8889,0,0,0.775,0,0)" width="162.326"/>
 </svg>
 <text atv:refpx="1091.665" atv:refpy="197.5" fill="#cfcfcf" font-family="Arial" font-size="20" id="id_3" x="1071.165" y="196.5">$ value1 $</text>
 <text atv:refpx="1019.573" atv:refpy="221.5" fill="#cfcfcf" font-family="Arial" font-size="10" id="id_4" x="967.073" y="229">Установка</text>
 <text atv:refpx="1162.369" atv:refpy="221.5" fill="#cfcfcf" font-family="Arial" font-size="10" id="id_8" x="1071.542" y="229">Текущее значение</text>
 <foreignObject height="43.193" id="id_9" width="169.016" x="661.298" y="255">
  <div style="width:100%;height:100%" xmlns="http://www.w3.org/1999/xhtml">
   <button class="button-blue" id="setWD" style="text-align:center;">Отправить</button>
  </div>
 </foreignObject>
 <foreignObject height="43.193" id="id_11" width="169.016" x="995.353" y="255">
  <div style="width:100%;height:100%" xmlns="http://www.w3.org/1999/xhtml">
   <button class="button-blue" id="setToolPos" style="text-align:center;">Отправить</button>
  </div>
 </foreignObject>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[
var wdBtn = document.getElementById("setWD")
var tpBtn = document.getElementById("setToolPos")

webMI.data.subscribe("AGENT.OBJECTS.IVE50.Well.WellDepth", function(e) {
var id = "wd_current";
var value = e.value;

webMI.gfx.setText(id, webMI.sprintf("%.2f", value));

});

webMI.data.subscribe("AGENT.OBJECTS.IVE50.Tool.ToolPosition", function(e) {
var id = "id_3";
var value = e.value;

webMI.gfx.setText(id, webMI.sprintf("%.2f", value));

});

function setSignal(signal, ruName) {
	if (webMI.hasRight("USER." + "SignalControl")) {
		webMI.display.openWindow({
			display: "AGENT.DISPLAYS.NewView.SignalControl.ConfirmationWindow",
			extern: false,
			height: 400,
			width: 600,
			menubar: false,
			modal: true,
			movable: true,
			resizable: false,
			scrollbars: false,
			status: false,
			title: "Изменение значений",
			toolbar: false,
			query: { signal: signal, ruName: ruName }
		})
	} else { alert("Недостаточно прав") }
}

wdBtn.addEventListener("click", function() {
	setSignal("well_depth", "Забой")
})
tpBtn.addEventListener("click", function() {
	setSignal("tool_position", "Положение инструмента")	
})]]></script>
</svg>
