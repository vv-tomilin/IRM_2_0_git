<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink" width="1280" version="1.2" height="120" xmlns="http://www.w3.org/2000/svg">
 <defs>
  <linearGradient x2="1" gradientUnits="objectBoundingBox" y1="0.0149254" id="linear_30" y2="1" x1="1">
   <stop stop-opacity="0.392156862745098" stop-color="#ffffff" offset="0"/>
   <stop stop-opacity="0" stop-color="#ffffff" offset="1"/>
  </linearGradient>
  <linearGradient x2="1" gradientUnits="objectBoundingBox" y1="0.0149254" id="linear_37" y2="1" x1="1">
   <stop stop-opacity="0.392156862745098" stop-color="#ffffff" offset="0"/>
   <stop stop-opacity="0" stop-color="#ffffff" offset="1"/>
  </linearGradient>
  <linearGradient x2="1" gradientUnits="objectBoundingBox" y1="0.0149254" id="linear_38" y2="1" x1="1">
   <stop stop-opacity="0.392156862745098" stop-color="#ffffff" offset="0"/>
   <stop stop-opacity="0" stop-color="#ffffff" offset="1"/>
  </linearGradient>
 </defs>
 <rect y="-2" width="1280" atv:refpx="640" height="122" fill="$FILLCOLOR$" stroke="#575757" x="0" id="id_4" atv:refpy="59" stroke-width="2"/>
 <desc>This control is used as the top frame by default.</desc>
 <title>Topframe large (1280x120)</title>
 <metadata>
  <atv:parameter defaultvalue="SYSTEM.GLOBALS.atvFontColor" desc="font color" name="fontColor" behavior="optional" substitute="$FONTCOLOR$" valuetype="global" group="Appearance"/>
  <atv:parameter defaultvalue="SYSTEM.GLOBALS.atvFillColor" desc="background color" name="fillColor" behavior="optional" substitute="$FILLCOLOR$" valuetype="global"/>
  <atv:parameter defaultvalue="0" behavior="optional" desc="min alarm priority" group="Alarm" valuetype="number" name="minAlarmPriority"/>
  <atv:parameter defaultvalue="0" behavior="optional" desc="max alarm priority" group="Alarm" valuetype="number" name="maxAlarmPriority"/>
  <atv:gridconfig width="10" gridstyle="lines" enabled="false" height="10"/>
  <atv:snapconfig width="2" enabled="true" height="2"/>
 </metadata>
 <path id="id_33" stroke-width="2" atv:refpx="355.987" atv:refpy="59.436" fill="#000088" d="M0,0" stroke="#0000ff"/>
 <svg id="id_29" atv:refpx="771.998" transform="matrix(0.525,0,0,1.4,0,0)" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button_open_display" y="52.857" height="30" atv:refpy="95.935" width="80" x="1430.476">
  <atv:argument name="display" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.historylist"/>
  <atv:argument name="symbol" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.history"/>
  <atv:argument name="symbolPressed" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.history"/>
  <atv:argument name="visibilityLabel" value="hidden"/>
  <atv:argument name="visibilitySymbol" value="inherit"/>
  <atv:argument name="tabIndex" value="-999999"/>
  <atv:overwrite id="button_symbol_pressed" transform="matrix(1.7778,0,0,0.6667,0,0)" y="12.5" x="12.5"/>
  <atv:overwrite id="id_2" transform="matrix(1.7778,0,0,0.6667,0,0)" height="39.5" width="39.5"/>
  <atv:overwrite id="id_0" transform="matrix(1.7778,0,0,0.6667,0,0)" height="44.5" width="44.5"/>
  <atv:argument name="borderVisible" value="true"/>
  <atv:overwrite id="id_1" transform="matrix(1.9048,0,0,0.7143,0,0)" height="42" width="42"/>
  <atv:argument name="extraBorderColor" value="#ffffff"/>
  <atv:argument name="smallDisplay" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.historylist_small"/>
  <atv:overwrite id="id_6" transform="matrix(1.9048,0,0,0.7143,0,0)" height="40" width="40"/>
  <atv:overwrite id="button_label" transform="matrix(1.9048,0,0,0.7143,0,0)" y="25.5" x="21"/>
  <atv:overwrite id="button_symbol" transform="matrix(1.9048,0,0,0.7143,0,0)" y="11" x="11"/>
  <atv:overwrite id="button_stroke" transform="matrix(1.9048,0,0,0.7143,0,0)" height="38" width="38"/>
  <atv:overwrite id="button_bg" transform="matrix(1.9048,0,0,0.7143,0,0)" height="40" width="40"/>
 </svg>
 <svg y="72" width="168" atv:refpx="122" height="45" x="38" id="id_22" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_display" atv:refpy="95.5">
  <atv:argument name="symbolColor2" value="#ffffff"/>
 </svg>
 <svg y="72" width="168" atv:refpx="308.613" height="45" x="255" id="id_13" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_zoom" atv:refpy="88"/>
 <svg y="72" width="168" atv:refpx="661" height="45" x="579" id="id_15" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_alarm" atv:refpy="95.5"/>
 <rect y="4" width="655" atv:refpx="1491.5" height="65" fill="#ffffff" stroke="none" x="582" id="id_14" ry="4" rx="6" atv:refpy="36.5" stroke-width="2"/>
 <rect y="4.911" width="653.098" atv:refpx="-659.448" height="20.408" fill="url(#linear_30)" stroke="none" x="582.939" id="id_16" ry="4.082" rx="6.008" atv:refpy="3.983" stroke-width="2"/>
 <svg y="-1" width="650" atv:refpx="905" height="75" fill="#ffffff" x="580" id="id_8" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.alarmlog" atv:refpy="44">
  <atv:argument name="fill" value="#ff0000"/>
  <atv:argument value="SYSTEM.GLOBALS.atvSymbolColor" name="symbolColor"/>
  <atv:argument prefix="minAlarmPriority" name="minAlarmPriority"/>
  <atv:argument prefix="maxAlarmPriority" name="maxAlarmPriority"/>
 </svg>
 <rect y="4" width="269" atv:refpx="2098.487" height="65" fill="#ffffff" stroke="none" x="258" id="id_27" ry="6" rx="6" atv:refpy="126.5" stroke-width="1.542"/>
 <rect y="4.911" width="266.465" atv:refpx="1479.536" height="20.408" fill="url(#linear_37)" stroke="none" x="259.21" id="id_28" ry="6.123" rx="6.009" atv:refpy="136.635" stroke-width="1.542"/>
 <text y="48" font-weight="normal" text-anchor="end" font-family="Arial" atv:refpx="171.561" font-size="12" fill="$FONTCOLOR$" x="507.5" id="username_label" atv:refpy="-33.5"/>
 <text y="48" font-weight="bold" font-family="Arial" atv:refpx="-564.436" font-size="12" fill="$FONTCOLOR$" x="279.5" id="id_20" atv:refpy="-3.5">T{User}:</text>
 <text y="34" font-weight="normal" text-anchor="end" font-family="Arial" atv:refpx="-1122.968" font-size="12" fill="$FONTCOLOR$" x="507.5" id="time_label" atv:refpy="-9.5">10:56</text>
 <text y="34" font-weight="bold" font-family="Arial" atv:refpx="293.5" font-size="12" fill="$FONTCOLOR$" x="279.5" id="id_19" atv:refpy="30.5">T{Time}:</text>
 <text y="62" font-weight="normal" text-anchor="end" font-family="Arial" atv:refpx="-714.182" font-size="12" fill="$FONTCOLOR$" x="507.5" id="language_label" atv:refpy="-22.5">T{}</text>
 <text y="62" font-weight="bold" font-family="Arial" atv:refpx="-2056.368" font-size="12" fill="$FONTCOLOR$" x="279.5" id="id_25" atv:refpy="-51.5">T{Language}:</text>
 <text y="20" font-weight="normal" text-anchor="end" font-family="Arial" atv:refpx="-1413.757" font-size="12" fill="$FONTCOLOR$" x="507.5" id="date_label" atv:refpy="-8.5">25.02.2011</text>
 <text y="20" font-weight="bold" font-family="Arial" atv:refpx="292.5" font-size="12" fill="$FONTCOLOR$" x="279.5" id="id_18" atv:refpy="16.5">T{Date}:</text>
 <svg y="48" width="30" atv:refpx="456.5" transform="matrix(1.5,0,0,1.5,0,0)" height="30" x="292.001" id="id_11" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_login" atv:refpy="95.499">
  <atv:overwrite y="12.5" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" id="button_symbol"/>
  <atv:overwrite width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5" id="button_stroke"/>
  <atv:overwrite y="12.5" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" id="button_symbol_pressed"/>
  <atv:overwrite width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5" id="button_bg"/>
  <atv:overwrite width="39.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="39.5" id="id_3"/>
  <atv:overwrite width="44.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="44.5" id="id_0"/>
 </svg>
 <svg y="72" width="45" atv:refpx="504.5" height="45" x="485" id="id_12" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_switch_language" atv:refpy="95.5"/>
 <rect y="4" width="160" atv:refpx="1136.713" height="65" fill="#ffffff" stroke="none" x="42" id="id_1" ry="6" rx="6" atv:refpy="126.5" stroke-width="1.542"/>
 <rect y="4.911" width="158.436" atv:refpx="768.334" height="20.408" fill="url(#linear_38)" stroke="none" x="42.747" id="id_5" ry="6.123" rx="6.009" atv:refpy="136.635" stroke-width="1.542"/>
 <g atv:refpx="123.31" atv:refpy="35.969" transform="matrix(0.6198,0,0,0.6198,77.6812,-2.4818)" id="atvise_logo">
  <svg width="80" x="63.696" atv:refpx="159.452" y="31.504" atv:refpy="49.236" transform="matrix(0.6904,0,0,0.6904,0,0)" height="80" atv:dynamic="true" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.atvise_logo" id="id_17"/>
  <rect stroke-width="0" fill="#000000" width="55.2" x="44" atv:refpx="212.5" fill-opacity="0.0001" y="21.794" atv:refpy="75" stroke="none" height="55.2" id="logo_click"/>
  <text fill="$FONTCOLOR$" x="39.5" atv:refpx="154.639" font-size="22" y="96.75" atv:refpy="57.732" atv:dynamic="true" font-family="Verdana, Arial" id="title">atvise</text>
 </g>
 <g atv:refpx="1168.293" id="redu_info" visibility="hidden" atv:refpy="93.664">
  <g atv:refpx="1141.471" transform="matrix(1,0,0,1,-0.9122,-0.4065)" id="id_36" atv:refpy="97.989">
   <text y="89.235" text-anchor="start" font-family="Arial" atv:refpx="1152.563" font-size="8" fill="$FONTCOLOR$" x="1133.387" id="id_31" atv:refpy="85.922">T{STATUS}:</text>
   <text y="105.235" font-weight="bold" text-anchor="start" font-family="Arial" atv:refpx="1150.063" font-size="14" fill="$FONTCOLOR$" x="1133.387" id="redu_status" atv:refpy="100.922"/>
  </g>
  <text y="103.828" font-weight="bold" font-family="Arial" atv:refpx="1101.888" font-size="30" fill="$FONTCOLOR$" x="1103.16" id="redu_role" atv:refpy="99.328"/>
  <svg y="52.857" width="80" atv:refpx="1216.279" transform="matrix(0.525,0,0,1.4,0,0)" height="30" x="2277" id="id_43" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button_open_display" atv:refpy="95.934">
   <atv:argument name="display" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.status"/>
   <atv:argument name="symbol" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info"/>
   <atv:argument name="symbolPressed" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info"/>
   <atv:argument name="visibilityLabel" value="hidden"/>
   <atv:argument name="visibilitySymbol" value="inherit"/>
   <atv:argument name="tabIndex" value="-999999"/>
   <atv:overwrite y="12.5" transform="matrix(1.7778,0,0,0.6667,0,0)" x="12.5" id="button_symbol_pressed"/>
   <atv:overwrite width="39.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="39.5" id="id_2"/>
   <atv:overwrite width="44.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="44.5" id="id_0"/>
   <atv:argument name="borderVisible" value="true"/>
   <atv:overwrite width="42" transform="matrix(1.9048,0,0,0.7143,0,0)" height="42" id="id_1"/>
   <atv:argument name="extraBorderColor" value="#ffffff"/>
   <atv:overwrite width="40" transform="matrix(1.9048,0,0,0.7143,0,0)" height="40" id="id_6"/>
   <atv:overwrite y="25.5" transform="matrix(1.9048,0,0,0.7143,0,0)" x="21" id="button_label"/>
   <atv:overwrite y="11" transform="matrix(1.9048,0,0,0.7143,0,0)" x="11" id="button_symbol"/>
   <atv:overwrite width="38" transform="matrix(1.9048,0,0,0.7143,0,0)" height="38" id="button_stroke"/>
   <atv:overwrite width="40" transform="matrix(1.9048,0,0,0.7143,0,0)" height="40" id="button_bg"/>
   <atv:overwrite width="42" transform="matrix(1.9048,0,0,0.7143,0,0)" height="42" id="outer_frame"/>
  </svg>
 </g>
 <line x2="228" y1="8" atv:refpx="228.5" stroke="#D7D7D7" id="id_9" y2="116" atv:refpy="62" x1="228" stroke-width="0.5"/>
 <line x2="553" y1="7" atv:refpx="552.5" stroke="#D7D7D7" id="id_10" y2="115" atv:refpy="60" x1="553" stroke-width="0.5"/>
 <script type="text/ecmascript"><![CDATA[var tabHandler = webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Tab Handler");

webMI.addEvent("atvise_logo", "click", function(e) {
var id = "atvise_logo";
var value = true;
return function(value) {
	var names = tabHandler.getParentIFrameNames();
	for (var i=0;i<names.length;i++){
		var NN;
		webMI.trigger.fire("com.atvise.getDefaultDisplay_"+(NN=names[i]),function(display,url){
			if (url != undefined)
				webMI.display.openUrl(url, webMI.query,NN);
			else if (display != undefined)
				webMI.display.openDisplay(display, webMI.query,NN);
		});
	}
} (value);
});

webMI.addEvent(webMI.data, "clientvariableschange", function(e) {
	webMI.gfx.setText("username_label", (e.username) ? e.username : "");
});

function updateTime() {
	var time = new Date();
	webMI.gfx.setText("date_label", webMI.sprintf("%02d",time.getDate()) + "." + webMI.sprintf("%02d",time.getMonth()+1) + "." + time.getFullYear());
	webMI.gfx.setText("time_label", webMI.sprintf("%02d",time.getHours()) + ":" + webMI.sprintf("%02d",time.getMinutes()));
}

webMI.addOnload(function() {
	updateTime();
	var updateDateTime = setInterval( function() { updateTime(); },60000);
});

var reduinfoInitialized = false;
webMI.addEvent(webMI.data, "serverstatechange", function() {
	if (reduinfoInitialized)
		return;

	reduinfoInitialized = true;
	webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Redundancy PopUp", {"display":"SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.warning_dialog"});
	webMI.gfx.setVisible("redu_info", null);
	webMI.data.subscribe("AGENT.REDUNDANCY.role", function(e) {
		webMI.gfx.setText("redu_role", e.value.charAt(0));
	});

	webMI.data.subscribe("AGENT.REDUNDANCY.status", function(e) {
		e.value = getStatusTranslation(e.value);
		webMI.gfx.setText("redu_status", e.value);
	});
});

function getStatusTranslation(text) {
    var statustext;
    switch(text) {
        case "Active":
            statustext = "T{Active}";
            break;
        case "Passive":
            statustext = "T{Passive}";
            break;
        case "SOP":
            statustext = "T{SOP}";
            break;
        case "SNOP":
            statustext = "T{SNOP}";
            break;
        default:
            statustext = text;
    }

    return statustext;
}

]]></script>
</svg>
