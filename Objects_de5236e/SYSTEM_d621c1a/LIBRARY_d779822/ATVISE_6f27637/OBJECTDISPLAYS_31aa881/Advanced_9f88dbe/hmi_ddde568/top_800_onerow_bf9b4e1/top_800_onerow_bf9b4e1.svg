<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" version="1.2" height="50" xmlns="http://www.w3.org/2000/svg">
 <defs/>
 <rect y="0" width="800" atv:refpx="400" height="50" fill="$FILLCOLOR$" stroke="#d7d7d7" x="0" id="id_1" atv:refpy="25" stroke-width="1"/>
 <desc>A minimal version of the default "top" display (e.g. for panel screens).</desc>
 <title>Topframe one row</title>
 <metadata>
  <atv:parameter defaultvalue="SYSTEM.GLOBALS.atvFontColor" desc="font color" name="fontColor" behavior="optional" substitute="$FONTCOLOR$" valuetype="global"/>
  <atv:parameter defaultvalue="SYSTEM.GLOBALS.atvFillColor" desc="background color" name="fillColor" behavior="optional" substitute="$FILLCOLOR$" valuetype="global"/>
  <atv:gridconfig width="10" gridstyle="lines" enabled="true" height="10"/>
  <atv:snapconfig width="5" enabled="true" height="5"/>
 </metadata>
 <path d="M0,0" atv:refpx="355.987" fill="#000088" stroke="#0000ff" id="id_33" atv:refpy="59.436" stroke-width="2"/>
 <svg y="2.5" width="168" atv:refpx="115" height="45" x="35" id="id_22" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_display" atv:refpy="25">
  <atv:argument name="symbolColor2" value="#ffffff"/>
 </svg>
 <svg y="1.667" width="30" atv:refpx="502.498" transform="matrix(1.5,0,0,1.5,0,0)" height="30" x="320" id="id_11" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_login" atv:refpy="24.999">
  <atv:overwrite y="12.5" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" id="button_symbol"/>
  <atv:overwrite width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5" id="button_stroke"/>
  <atv:overwrite y="12.5" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" id="button_symbol_pressed"/>
  <atv:overwrite width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5" id="button_bg"/>
  <atv:overwrite width="39.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="39.5" id="id_3"/>
  <atv:overwrite width="44.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="44.5" id="id_0"/>
 </svg>
 <svg y="2.5" width="45" atv:refpx="442.5" height="45" x="420" id="id_12" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_switch_language" atv:refpy="25"/>
 <rect y="2.5" width="194.5" atv:refpx="865.301" height="45" fill="#ffffff" stroke="#d7d7d7" x="210.5" id="id_5" ry="5.625" rx="5" atv:refpy="33.34" stroke-width="1"/>
 <text y="20" font-weight="bold" text-anchor="end" font-family="Arial" atv:refpx="75.207" font-size="14" fill="$FONTCOLOR$" x="396" id="username_label" atv:refpy="-62.261"/>
 <text y="20" font-weight="bold" font-family="Arial" atv:refpx="-1499.827" font-size="14" fill="$FONTCOLOR$" x="262" id="id_20" atv:refpy="-269.5">T{User}:</text>
 <text y="39" font-weight="bold" text-anchor="end" font-family="Arial" atv:refpx="-777.066" font-size="14" fill="$FONTCOLOR$" x="396" id="language_label" atv:refpy="-43.261">T{}</text>
 <text y="39" font-weight="bold" font-family="Arial" atv:refpx="-1708.444" font-size="14" fill="$FONTCOLOR$" x="262" id="id_25" atv:refpy="-70.5">T{Language}:</text>
 <g atv:refpx="233.02" atv:refpy="25.039" id="logo_clickarea">
  <svg width="80" x="704.473" atv:refpx="232.976" y="40.06" atv:refpy="24.997" transform="matrix(0.313,0,0,0.313,0,0)" height="80" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.atvise_logo" id="atvise_logo"/>
  <rect stroke-width="0" fill="#000000" width="25" x="220.5" atv:refpx="247.6" fill-opacity="0.0001" y="12.5" atv:refpy="39.6" stroke="none" height="25" id="logo_click"/>
 </g>
 <g atv:refpx="690.562" atv:refpy="25.336" visibility="hidden" id="redu_info">
  <g atv:refpx="1141.471" atv:refpy="97.989" transform="matrix(1,0,0,1,-480.0722,-69.2345)" id="id_36">
   <text fill="$FONTCOLOR$" x="1133.387" atv:refpx="1154.387" font-size="8" text-anchor="start" y="89.235" atv:refpy="85.735" font-family="Arial" id="id_31">T{STATUS}:</text>
   <text fill="$FONTCOLOR$" x="1133.387" atv:refpx="1151.887" font-size="14" text-anchor="start" y="105.235" atv:refpy="101.735" font-family="Arial" font-weight="bold" id="redu_status"/>
  </g>
  <text y="35" font-weight="bold" font-family="Arial" atv:refpx="932.136" font-size="30" fill="$FONTCOLOR$" x="624" id="redu_role" atv:refpy="235.68"/>
  <svg y="2.115" width="80" atv:refpx="1217.783" transform="matrix(0.5625,0,0,1.5,0,0)" height="30" x="1273.11" id="id_43" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button_open_display" atv:refpy="95.501">
   <atv:argument name="display" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.status"/>
   <atv:argument name="symbol" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info"/>
   <atv:argument name="symbolPressed" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info"/>
   <atv:argument name="visibilityLabel" value="hidden"/>
   <atv:argument name="visibilitySymbol" value="inherit"/>
   <atv:argument name="tabIndex" value="-999999"/>
   <atv:overwrite y="12.5" transform="matrix(1.7778,0,0,0.6667,0,0)" x="12.5" id="button_symbol_pressed"/>
   <atv:overwrite width="39.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="39.5" id="id_2"/>
   <atv:overwrite width="44.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="44.5" id="id_0"/>
   <atv:argument name="borderVisible" value="true"/>
   <atv:overwrite width="43" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43" id="id_6"/>
   <atv:overwrite y="27" transform="matrix(1.7778,0,0,0.6667,0,0)" x="22.5" id="button_label"/>
   <atv:overwrite y="12.5" transform="matrix(1.7778,0,0,0.6667,0,0)" x="12.5" id="button_symbol"/>
   <atv:overwrite width="41" transform="matrix(1.7778,0,0,0.6667,0,0)" height="41" id="button_stroke"/>
   <atv:overwrite width="43" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43" id="button_bg"/>
   <atv:overwrite width="45" transform="matrix(1.7778,0,0,0.6667,0,0)" height="45" id="outer_frame"/>
  </svg>
 </g>
 <script type="text/ecmascript"><![CDATA[var tabHandler = webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Tab Handler");

webMI.addEvent("logo_clickarea", "click", function(e) {
var id = "logo_clickarea";
var value = true;
return function(value) {
	var names = tabHandler.getParentIFrameNames();
	for (var i=0;i<names.length;i++){
		var NN;
		webMI.trigger.fire("com.atvise.getDefaultDisplay_"+(NN=names[i]),function(display,url){
			if (url != undefined)
				webMI.display.openUrl(url, webMI.query,NN);
			else if (display != undefined)
				webMI.display.openDisplay(display, webMI.query,NN);
		});
	}
} (value);
});

webMI.addEvent(webMI.data, "clientvariableschange", function(e) {
	webMI.gfx.setText("username_label", (e.username) ? e.username : "");
});

var reduinfoInitialized = false;
webMI.addEvent(webMI.data, "serverstatechange", function() {
	if (reduinfoInitialized)
		return;

	reduinfoInitialized = true;
	webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Redundancy PopUp", {"display":"SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.warning_dialog"});
	webMI.gfx.setVisible("redu_info", null);
	webMI.data.subscribe("AGENT.REDUNDANCY.role", function(e) {
		webMI.gfx.setText("redu_role", e.value.charAt(0));
	});

    webMI.data.subscribe("AGENT.REDUNDANCY.status", function(e) {
		e.value = getStatusTranslation(e.value);
		webMI.gfx.setText("redu_status", e.value);
	});
});

function getStatusTranslation(text) {
    var statustext;
    switch(text) {
        case "Active":
            statustext = "T{Active}";
            break;
        case "Passive":
            statustext = "T{Passive}";
            break;
        case "SOP":
            statustext = "T{SOP}";
            break;
        case "SNOP":
            statustext = "T{SNOP}";
            break;
        default:
            statustext = text;
    }

    return statustext;
}

]]></script>
</svg>
