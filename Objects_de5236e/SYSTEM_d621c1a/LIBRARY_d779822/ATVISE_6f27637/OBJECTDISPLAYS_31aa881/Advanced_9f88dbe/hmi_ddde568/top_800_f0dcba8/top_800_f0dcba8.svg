<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg version="1.2" xmlns:atv="http://webmi.atvise.com/2007/svgext" width="800" height="120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <rect id="id_4" width="800" fill="$FILLCOLOR$" stroke="#c8c8c8" atv:refpy="60" atv:refpx="400" height="120" stroke-width="1" y="0" x="0"/>
 <desc>A small version of the default "top" display (e.g. for panel screens).</desc>
 <title>Topframe small (800x120)</title>
 <metadata>
  <atv:parameter substitute="$FONTCOLOR$" defaultvalue="SYSTEM.GLOBALS.atvFontColor" desc="font color" behavior="optional" valuetype="global" name="fontColor"/>
  <atv:parameter substitute="$FILLCOLOR$" defaultvalue="SYSTEM.GLOBALS.atvFillColor" desc="background color" behavior="optional" valuetype="global" name="fillColor"/>
  <atv:parameter defaultvalue="0" behavior="optional" desc="min alarm priority" group="Alarm" valuetype="number" name="minAlarmPriority"/>
  <atv:parameter defaultvalue="0" behavior="optional" desc="max alarm priority" group="Alarm" valuetype="number" name="maxAlarmPriority"/>
  <atv:gridconfig width="10" enabled="true" height="10" gridstyle="lines"/>
  <atv:snapconfig width="5" enabled="true" height="5"/>
 </metadata>
 <path id="id_33" stroke-width="2" atv:refpx="355.987" atv:refpy="59.436" fill="#000088" d="M0,0" stroke="#0000ff"/>
 <svg id="id_29" atv:refpx="726.498" transform="matrix(0.5625,0,0,1.5,0,0)" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button_open_display" y="10" height="30" atv:refpy="37.501" width="80" x="1251.556">
  <atv:argument name="display" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.historylist"/>
  <atv:argument name="symbol" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.history"/>
  <atv:argument name="symbolPressed" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.history"/>
  <atv:argument name="visibilityLabel" value="hidden"/>
  <atv:argument name="visibilitySymbol" value="inherit"/>
  <atv:argument name="tabIndex" value="-999999"/>
  <atv:overwrite id="button_symbol_pressed" transform="matrix(1.7778,0,0,0.6667,0,0)" y="12.5" x="12.5"/>
  <atv:overwrite id="id_2" transform="matrix(1.7778,0,0,0.6667,0,0)" height="39.5" width="39.5"/>
  <atv:overwrite id="id_0" transform="matrix(1.7778,0,0,0.6667,0,0)" height="44.5" width="44.5"/>
  <atv:argument name="borderVisible" value="true"/>
  <atv:argument name="extraBorderColor" value="#FFFFFF"/>
  <atv:argument name="smallDisplay" value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.historylist_small"/>
  <atv:overwrite id="id_6" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43" width="43"/>
  <atv:overwrite id="button_label" transform="matrix(1.7778,0,0,0.6667,0,0)" y="27" x="22.5"/>
  <atv:overwrite id="button_symbol" transform="matrix(1.7778,0,0,0.6667,0,0)" y="12.5" x="12.5"/>
  <atv:overwrite id="button_stroke" transform="matrix(1.7778,0,0,0.6667,0,0)" height="41" width="41"/>
  <atv:overwrite id="button_bg" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43" width="43"/>
  <atv:overwrite id="outer_frame" transform="matrix(1.7778,0,0,0.6667,0,0)" height="45" width="45"/>
 </svg>
 <svg id="id_22" width="168" atv:refpy="87.5" atv:refpx="86" height="45" y="65" x="4" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_display">
  <atv:argument value="#ffffff" name="symbolColor2"/>
 </svg>
 <svg id="id_13" width="168" atv:refpy="80" atv:refpx="219.613" height="45" y="65" x="172" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_zoom"/>
 <svg id="id_15" width="168" atv:refpy="87.5" atv:refpx="410" height="45" y="65" x="340" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_group_alarm"/>
 <svg id="id_11" width="30" transform="matrix(1.5,0,0,1.5,0,0)" atv:refpy="87.499" atv:refpx="723.998" height="30" y="43.333" x="468.334" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_login">
  <atv:overwrite id="button_symbol" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" y="12.5"/>
  <atv:overwrite id="button_stroke" width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5"/>
  <atv:overwrite id="button_symbol_pressed" transform="matrix(0.6667,0,0,0.6667,0,0)" x="12.5" y="12.5"/>
  <atv:overwrite id="button_bg" width="37.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="37.5"/>
  <atv:overwrite id="id_3" width="39.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="39.5"/>
  <atv:overwrite id="id_0" width="44.5" transform="matrix(0.6667,0,0,0.6667,0,0)" height="44.5"/>
 </svg>
 <svg id="id_12" width="45" atv:refpy="87.5" atv:refpx="662" height="45" y="65" x="657.5" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.button_switch_language"/>
 <rect id="id_1" ry="5" width="696" fill="#ffffff" stroke="#d7d7d7" atv:refpy="61.731" atv:refpx="3050.497" height="45" stroke-width="1" y="15" x="6" rx="4.971"/>
 <svg id="id_16" width="650" atv:refpy="38.955" atv:refpx="512.003" height="37.91" y="20" x="46.5" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.alarmlog_1row">
  <atv:argument prefix="minAlarmPriority" name="minAlarmPriority"/>
  <atv:argument prefix="maxAlarmPriority" name="maxAlarmPriority"/>
 </svg>
 <rect id="id_5" ry="5" width="145" fill="#ffffff" stroke="#d7d7d7" atv:refpy="95.84" atv:refpx="980.655" height="45" stroke-width="1" y="65" x="510" rx="5"/>
 <text id="username_label" font-weight="bold" font-size="14" fill="$FONTCOLOR$" atv:refpy="-0.261" atv:refpx="313.061" font-family="Arial" y="82" x="649.5" text-anchor="end"/>
 <text id="id_20" font-weight="bold" font-size="14" fill="$FONTCOLOR$" atv:refpy="-207.5" atv:refpx="-1307.289" font-family="Arial" y="82" x="516.5">T{User}:</text>
 <text id="language_label" font-weight="bold" font-size="14" fill="$FONTCOLOR$" atv:refpy="18.739" atv:refpx="-698.528" font-family="Arial" y="101" x="649.5" text-anchor="end">T{}</text>
 <text id="id_25" font-weight="bold" font-size="14" fill="$FONTCOLOR$" atv:refpy="-8.5" atv:refpx="-1515.906" font-family="Arial" y="101" x="516.5">T{Language}:</text>
 <g atv:refpx="23.658" atv:refpy="37.521" id="logo_clickarea">
  <svg width="80" x="35.516" atv:refpx="23.592" atv:refpy="37.46" y="79.878" transform="matrix(0.313,0,0,0.313,0,0)" height="80" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.atvise_logo" id="atvise_logo"/>
  <rect stroke-width="0" fill="#000000" width="25" x="11.2" atv:refpx="246.1" fill-opacity="0.0001" y="25" atv:refpy="52.1" stroke="none" height="25" id="logo_click"/>
 </g>
 <g atv:refpx="768.603" atv:refpy="60" visibility="hidden" id="redu_info">
  <svg width="80" x="1335.111" atv:refpx="1577.659" atv:refpy="164.828" y="10" transform="matrix(0.5625,0,0,1.5,0,0)" height="30" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.button_open_display" id="id_43">
   <atv:argument value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.status" name="display"/>
   <atv:argument value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info" name="symbol"/>
   <atv:argument value="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.info" name="symbolPressed"/>
   <atv:argument value="hidden" name="visibilityLabel"/>
   <atv:argument value="inherit" name="visibilitySymbol"/>
   <atv:argument value="-999999" name="tabIndex"/>
   <atv:overwrite id="button_symbol_pressed" transform="matrix(1.7778,0,0,0.6667,0,0)" y="12.5" x="12.5"/>
   <atv:overwrite id="id_2" width="39.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="39.5"/>
   <atv:overwrite id="id_0" width="44.5" transform="matrix(1.7778,0,0,0.6667,0,0)" height="44.5"/>
   <atv:argument value="true" name="borderVisible"/>
   <atv:argument value="#FFFFFF" name="extraBorderColor"/>
   <atv:overwrite id="id_6" width="43" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43"/>
   <atv:overwrite id="button_label" transform="matrix(1.7778,0,0,0.6667,0,0)" x="22.5" y="27"/>
   <atv:overwrite id="button_symbol" transform="matrix(1.7778,0,0,0.6667,0,0)" x="12.5" y="12.5"/>
   <atv:overwrite id="button_stroke" width="41" transform="matrix(1.7778,0,0,0.6667,0,0)" height="41"/>
   <atv:overwrite id="button_bg" width="43" transform="matrix(1.7778,0,0,0.6667,0,0)" height="43"/>
   <atv:overwrite id="outer_frame" width="45" transform="matrix(1.7778,0,0,0.6667,0,0)" height="45"/>
  </svg>
  <g id="id_36" transform="matrix(1,0,0,1,-375.087,-6.7345)" atv:refpy="90.661" atv:refpx="767.296">
   <text id="id_31" font-size="8" fill="$FONTCOLOR$" atv:refpy="65.032" atv:refpx="29.126" font-family="Arial" y="88.734" x="1133.387" text-anchor="start">T{STATUS}:</text>
   <text id="redu_status" font-weight="bold" font-size="10" fill="$FONTCOLOR$" atv:refpy="57.328" atv:refpx="-1104.935" font-family="Arial" y="101.234" x="1127.087" text-anchor="start"/>
  </g>
  <text id="redu_role" font-weight="bold" font-size="26" fill="$FONTCOLOR$" atv:refpy="232.328" atv:refpx="1333.888" font-family="Arial" y="94.5" x="736"/>
 </g>
 <script type="text/ecmascript"><![CDATA[var tabHandler = webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Tab Handler");

webMI.addEvent("logo_clickarea", "click", function(e) {
var id = "logo_clickarea";
var value = true;
return function(value) {
	var names = tabHandler.getParentIFrameNames();
	for (var i=0;i<names.length;i++){
		var NN;
		webMI.trigger.fire("com.atvise.getDefaultDisplay_"+(NN=names[i]),function(display,url){
			if (url != undefined)
				webMI.display.openUrl(url, webMI.query,NN);
			else if (display != undefined)
				webMI.display.openDisplay(display, webMI.query,NN);
		});
	}
} (value);
});

webMI.addEvent(webMI.data, "clientvariableschange", function(e) {
	webMI.gfx.setText("username_label", (e.username) ? e.username : "");
});

var reduinfoInitialized = false;
webMI.addEvent(webMI.data, "serverstatechange", function() {
	if (reduinfoInitialized)
		return;

	reduinfoInitialized = true;
	webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Redundancy PopUp", {"display":"SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.redundancy.warning_dialog"});
	webMI.gfx.setVisible("redu_info", null);
	webMI.data.subscribe("AGENT.REDUNDANCY.role", function(e) {
		webMI.gfx.setText("redu_role", e.value.charAt(0));
	});

    webMI.data.subscribe("AGENT.REDUNDANCY.status", function(e) {
		e.value = getStatusTranslation(e.value);
		webMI.gfx.setText("redu_status", e.value);
	});
});

function getStatusTranslation(text) {
    var statustext;
    switch(text) {
        case "Active":
            statustext = "T{Active}";
            break;
        case "Passive":
            statustext = "T{Passive}";
            break;
        case "SOP":
            statustext = "T{SOP}";
            break;
        case "SNOP":
            statustext = "T{SNOP}";
            break;
        default:
            statustext = text;
    }

    return statustext;
}

]]></script>
</svg>
