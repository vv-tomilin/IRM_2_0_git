<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg width="40" version="1.2" xmlns="http://www.w3.org/2000/svg" height="156" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:atv="http://webmi.atvise.com/2007/svgext">
 <defs/>
 <desc>Displays a value as a bar chart.</desc>
 <title>Bar Vertical</title>
 <metadata>
  <atv:parameter desc="tint color" valuetype="color" substitute="$TINTCOLOR$" group="Colors" behavior="optional" name="tintColor" defaultvalue="#E3D700"/>
  <atv:parameter desc="background color" valuetype="color" substitute="$BACKGROUNDCOLOR$" group="Colors" behavior="optional" name="backgroundColor" defaultvalue="#3f434a"/>
  <atv:parameter desc="minimum" valuetype="number" substitute="$MIN$" group="Options" behavior="optional" name="minimum" defaultvalue="0"/>
  <atv:parameter desc="maximum" valuetype="number" substitute="$MAX$" group="Options" behavior="optional" name="maximum" defaultvalue="100"/>
  <atv:parameter desc="decimal places" valuetype="number" substitute="" group="Options" behavior="optional" name="decimalPlaces" defaultvalue="0"/>
  <atv:parameter desc="value label color" valuetype="color" substitute="$LABELCOLOR$" group="Label" behavior="optional" name="labelColor" defaultvalue="#ffffff"/>
  <atv:parameter desc="scale and label color" valuetype="color" substitute="$SCALECOLOR$" group="Colors" behavior="optional" name="scaleColor" defaultvalue="#B3B3B3"/>
  <atv:parameter config="Times New Roman=Times New Roman,Bodoni,Garamond,Minion Web,ITC Stone Serif,MS Georgia,Bitstream Cyberbit,serif;Arial=MS Trebuchet,ITC Avant Garde Gothic,MS Arial,MS Verdana,Univers,Futura,ITC Stone Sans,Gill Sans,Akzidenz Grotesk,Helvetica,sans-serif;Courier=Courier,MS Courier New,Prestige,Everson Mono,monospace;Zapf-Chancery=Caflisch Script,Adobe Poetica,Sanvito,Ex Ponto,Snell Roundhand,Zapf-Chancery,cursive;Alpha Geometrique=Alpha Geometrique,Critter,Cottonwood,FB Reactor,Studz,fantasy;OpenSans-Regular;OpenSans-ExtraBold;OpenSans-BoldItalic;OpenSans-Bold" desc="font family" valuetype="enum" substitute="$FONTFAMILY$" group="Font" behavior="optional" name="fontFamily" defaultvalue="Arial"/>
  <atv:parameter desc="half value" valuetype="number" substitute="$HALFVALUE$" behavior="hidden" name="halfValue" defaultvalue="50"/>
  <atv:parameter config="" desc="bar background color" valuetype="color" substitute="$BARBACKGROUNDCOLOR$" group="Colors" behavior="optional" name="barBackgroundColor" defaultvalue="#ffffff"/>
  <atv:parameter desc="label text" valuetype="trstring" substitute="$LABEL$" group="Label" behavior="optional" name="label" defaultvalue="T{Label}"/>
  <atv:parameter desc="unit" valuetype="string" substitute="$UNIT$" behavior="optional" name="unit" defaultvalue=""/>
  <atv:parameter desc="desired value" valuetype="address" substitute="" behavior="optional" name="desiredValue" defaultvalue=""/>
  <atv:parameter desc="font size" valuetype="string" substitute="$FONTSIZE$" group="Font" behavior="optional" name="fontSize" defaultvalue="16"/>
  <atv:parameter desc="label size" valuetype="string" substitute="$LABELSIZE$" group="Label" behavior="optional" name="labelFontSize" defaultvalue="7"/>
  <atv:gridconfig width="20" enabled="false" height="20" gridstyle="lines"/>
  <atv:snapconfig width="10" enabled="false" height="10"/>
 </metadata>
 <rect width="40" x="0" y="0" fill="$BACKGROUNDCOLOR$" rx="4" height="136" ry="4.496" stroke="none" id="id_1" atv:refpx="20" stroke-width="0" atv:refpy="68"/>
 <rect width="6" x="17" y="13.5" fill="$BARBACKGROUNDCOLOR$" height="82" stroke="none" id="barBackground" atv:refpx="19.506" stroke-width="0" atv:refpy="95.446"/>
 <rect width="6" x="17" y="54.5" fill="$TINTCOLOR$" height="41" stroke="none" id="id_0" atv:refpx="19.506" stroke-width="0" atv:refpy="95.473"/>
 <text x="19.232" y="120" fill="$LABELCOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_2" atv:refpx="19.7318" atv:refpy="115.5" font-size="$FONTSIZE$">13</text>
 <line stroke="none" id="id_3" y1="42.877" atv:refpx="20.886" x1="11.777" y2="43.429" stroke-width="0" atv:refpy="43.153" x2="29.996"/>
 <svg width="9" x="4" y="13.5" height="82" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Symbols.Bar%20Scale%2010" id="id_6" atv:refpx="12.5" atv:refpy="54.5">
  <atv:argument prefix="scaleColor" value="" name="color"/>
 </svg>
 <text x="31" y="16.274" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_7" atv:refpx="28" atv:refpy="11.774" font-size="8">$MAX$</text>
 <text x="31.5" y="97.5" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_8" atv:refpx="29.7" atv:refpy="93" font-size="8">$MIN$</text>
 <text x="31.5" y="57.287" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="half" atv:refpx="29.1" atv:refpy="52.787" font-size="8">$HALFVALUE$</text>
 <text x="20" y="130" fill="$LABELCOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_4" atv:refpx="20" atv:refpy="136.04" font-size="8">$UNIT$</text>
 <g id="desiredIndicator" atv:refpx="7" atv:refpy="54.5">
  <svg width="7" x="9" y="47.5" height="14" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.Symbols.GoForward" id="desiredIndicatorTriangle" atv:refpx="12.5" atv:refpy="54.5"/>
  <rect width="13" x="0" y="47.5" fill="#E3D700" rx="1" height="14" ry="1" stroke="none" id="id_5" atv:refpx="4.75" stroke-width="0" atv:refpy="54.543"/>
  <text x="6.5" y="57.5" fill="$BACKGROUNDCOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_9" atv:refpx="10" atv:refpy="53" font-size="8">50</text>
 </g>
 <text x="20.443" y="149" fill="$SCALECOLOR$" font-family="$FONTFAMILY$" text-anchor="middle" id="id_13" atv:refpx="20.443" atv:refpy="155.04" font-size="$LABELSIZE$">$LABEL$</text>
 <script type="text/ecmascript"><![CDATA[var minimum = webMI.query['minimum'],
	maximum = webMI.query['maximum'],
	decimalPlaces = webMI.query['decimalPlaces'];

(function() {
	var half = parseFloat(minimum) + (parseFloat(maximum) - parseFloat(minimum)) / 2;
	webMI.data.write(['halfValue'], [half]);
	webMI.gfx.setText('half', half);
})();

webMI.data.subscribe(webMI.query["base"] + "", function(e) {
	var id = "id_0";
	var value = Math.min(Math.max(e.value, minimum), maximum);
	webMI.gfx.setScaleY(id, webMI.translate(value, minimum, maximum, 0, 2));
});

webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Set Text", {"decimalPlaces":webMI.query["decimalPlaces"] + "", "id":"id_2", "nodeId":webMI.query["base"] + ""});

webMI.data.subscribe(webMI.query.base, function(e) {
	value = Math.min(Math.max(minimum, e.value), maximum);
	webMI.gfx.setScaleY('id_0', webMI.translate(value, minimum, maximum, 0, 2));
});

var desiredValue = webMI.query.desiredValue;
if (desiredValue != '') {
	webMI.data.subscribe(desiredValue, function(e) {
		if(e.value >= maximum)
			e.value = maximum;
		else if(e.value <= minimum)
			e.value = minimum;
		webMI.gfx.setMoveY('desiredIndicator', webMI.translate(e.value, minimum, maximum, 41, -41));
	});
}
else webMI.gfx.setVisible('desiredIndicator', false);

webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Set Text", {"decimalPlaces":"0", "id":"id_9", "nodeId":webMI.query.desiredValue});]]></script>
</svg>
